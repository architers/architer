<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="io.github.architers.center.menu.dao.SysUserDao">
    <select id="getUsersByPage" resultType="io.github.architers.center.menu.domain.vo.SysUserVO"
            parameterType="io.github.architers.center.menu.domain.dto.SysUserQueryDTO">
        select username, user_caption, status, create_by, update_by, create_time, update_time
        from sys_user
        where tenant_id = #{tenantId}
        <if test="username!=null">
            and username = #{username}
        </if>
        <if test="userCaption!=null">
            and user_caption like contract('%', #{userCaption},'%')
        </if>
        <if test="status!=null">
            and status = #{status}
        </if>
        and deleted =0
    </select>
    <select id="countByUsername" resultType="java.lang.Integer"
            parameterType="java.lang.String">
        select count(1)
        from sys_user
        where username = #{username}
          and deleted = 0
    </select>


</mapper>